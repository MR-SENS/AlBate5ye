<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>๐ ูุฑุดุฉ ุงูุจุทูุฎู | ูุธุงู ุฅุฏุงุฑุฉ ูุงูู</title>
<link rel="stylesheet" href="style.css"/>
<!-- Chart.js ููุฑุณูู ุงูุจูุงููุฉ -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="container">

  <!-- ====== Header ====== -->
  <div class="header">
    <h1>๐ง๐ ูุฑุดุฉ ุงูุจุทูุฎู โ ูุธุงู ุฅุฏุงุฑุฉ ุงููุฑุดุฉ</h1>
    <div class="header-controls">
      <span class="chip">๐ <span id="today"></span></span>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button id="themeToggle" class="btn btn-ghost">๐ ุชุจุฏูู ุงููุธูุฑ</button>
        <button id="seedDemo" class="btn btn-ghost">๐ฑ ุชุนุจุฆุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ</button>
        <button id="backupJson" class="btn btn-secondary">๐งฐ ุชุตุฏูุฑ ูุณุฎุฉ ุงุญุชูุงุทูุฉ (JSON)</button>
        <label class="btn btn-secondary" style="cursor:pointer">
          ๐ ุงุณุชูุฑุงุฏ ูุณุฎุฉ ุงุญุชูุงุทูุฉ
          <input id="restoreJson" type="file" accept=".json" style="display:none">
        </label>
      </div>
    </div>
  </div>

  <!-- ====== Navigation ====== -->
  <div class="nav">
    <!-- ุฒุฑุงุฑ ุงูุฅุถุงูุฉ ุงูููุญุฏ ูุดุงุดุฉ ูุณุชููุฉ -->
    <div class="nav-item active" data-screen="allInOne">โ ุฅุถุงูุฉ ุนูููุฉ ุฌุฏูุฏุฉ</div>

    <div class="nav-item" data-screen="clients">๐ฅ ุงูุนููุงุก</div>
    <div class="nav-item" data-screen="cars">๐ ุงูุณูุงุฑุงุช</div>
    <div class="nav-item" data-screen="maintenance">๐ง ุงูุตูุงูุฉ</div>
    <div class="nav-item" data-screen="revenue">๐ฐ ุงูุฅูุฑุงุฏุงุช</div>
    <div class="nav-item" data-screen="expenses">๐ธ ุงููุตุฑููุงุช</div>
    <div class="nav-item" data-screen="accounting">๐ ุงููุญุงุณุจุฉ</div>
  </div>

  <!-- ====== All-in-One Add ====== -->
  <section class="screen active" id="allInOne">
    <div class="screen-head">
      <div class="title">โ ุฅุถุงูุฉ ุนูููุฉ ุฌุฏูุฏุฉ (ุนููู + ุณูุงุฑุฉ + ุตูุงูุฉ + ุฅูุฑุงุฏ)</div>
    </div>
    <div class="form-grid" id="allInOneForm">
      <div class="form-group"><label>ุงุณู ุงูุนููู *</label><input id="allName" class="input" required></div>
      <div class="form-group"><label>ุฑูู ุงููุงุชู *</label><input id="allPhone" class="input" required></div>
      <div class="form-group"><label>ุฑูู ุงูุณูุงุฑุฉ *</label><input id="allPlate" class="input" required></div>
      <div class="form-group"><label>ุงูููุฏูู *</label><input id="allModel" class="input" required></div>
      <div class="form-group"><label>ุงูุชุงุฑูุฎ *</label><input id="allDate" type="date" class="input" required></div>
      <div class="form-group">
        <label>ููุน ุงูุตูุงูุฉ *</label>
        <select id="allType" class="select">
          <option>ุตูุงูุฉ ุฏูุฑูุฉ</option><option>ุฅุตูุงุญ</option><option>ุชุบููุฑ ูุทุน</option><option>ูุญุต</option>
        </select>
      </div>
      <div class="form-group" style="grid-column:1/-1"><label>ููุงุญุธุงุช</label><input id="allNotes" class="input"></div>
      <div class="form-group"><label>ุงูุณุนุฑ (ุฅูุฑุงุฏ) *</label><input id="allPrice" type="number" step="0.01" class="input" required></div>
    </div>
    <div style="margin-top:12px">
      <button id="saveAll" class="btn btn-primary">๐พ ุญูุธ ุงูุนูููุฉ</button>
    </div>
  </section>

  <!-- ====== ุงูุนููุงุก ====== -->
  <section class="screen" id="clients">
    <div class="screen-head">
      <div class="title">๐ฅ ุฅุฏุงุฑุฉ ุงูุนููุงุก</div>
      <button id="exportClientsFull" class="btn btn-success">๐ ุชุตุฏูุฑ ุจูุงูุงุช ุงูุนููุงุก ุงูุดุงููุฉ</button>
    </div>
    
    <!-- ุฃุฒุฑุงุฑ ุงูุชุฌููุน -->
    <div class="stats-filters">
      <div class="filter-buttons">
        <button id="clientsFilterDaily" class="btn btn-primary active">๐ ูููู</button>
        <button id="clientsFilterMonthly" class="btn btn-ghost">๐ ุดูุฑู</button>
        <button id="clientsFilterYearly" class="btn btn-ghost">๐ ุณููู</button>
      </div>
    </div>

    <!-- ููุฎุต ุงูุนููุงุก -->
    <div class="stats-summary">
      <div class="summary-card clients-total">
        <div class="summary-icon">๐ฅ</div>
        <div class="summary-content">
          <div class="summary-label">ุฅุฌูุงูู ุงูุนููุงุก</div>
          <div class="summary-amount" id="clientsTotal">0</div>
        </div>
      </div>
      
      <div class="summary-card clients-cars">
        <div class="summary-icon">๐</div>
        <div class="summary-content">
          <div class="summary-label">ุฅุฌูุงูู ุงูุณูุงุฑุงุช</div>
          <div class="summary-amount" id="clientsCarsTotal">0</div>
        </div>
      </div>
      
      <div class="summary-card clients-avg">
        <div class="summary-icon">๐</div>
        <div class="summary-content">
          <div class="summary-label">ูุชูุณุท ุงูุณูุงุฑุงุช/ุนููู</div>
          <div class="summary-amount" id="clientsAvgCars">0.00</div>
        </div>
      </div>
    </div>

    <div class="searchbar">
      <input id="clientSearch" class="input" placeholder="๐ ุจุญุซ ุณุฑูุน...">
    </div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>#</th><th>ุงูุงุณู</th><th>ุงููุงุชู</th><th>ุนุฏุฏ ุงูุณูุงุฑุงุช</th></tr></thead>
        <tbody id="clientsBody"></tbody>
      </table>
    </div>
  </section>

  <!-- ====== ุงูุณูุงุฑุงุช ====== -->
  <section class="screen" id="cars">
    <div class="screen-head">
      <div class="title">๐ ุณูุงุฑุงุช ุงูุนููุงุก</div>
    </div>
    
    <!-- ุฃุฒุฑุงุฑ ุงูุชุฌููุน -->
    <div class="stats-filters">
      <div class="filter-buttons">
        <button id="carsFilterDaily" class="btn btn-primary active">๐ ูููู</button>
        <button id="carsFilterMonthly" class="btn btn-ghost">๐ ุดูุฑู</button>
        <button id="carsFilterYearly" class="btn btn-ghost">๐ ุณููู</button>
      </div>
    </div>

    <!-- ููุฎุต ุงูุณูุงุฑุงุช -->
    <div class="stats-summary">
      <div class="summary-card cars-total">
        <div class="summary-icon">๐</div>
        <div class="summary-content">
          <div class="summary-label">ุฅุฌูุงูู ุงูุณูุงุฑุงุช</div>
          <div class="summary-amount" id="carsTotal">0</div>
        </div>
      </div>
      
      <div class="summary-card cars-maintenance">
        <div class="summary-icon">๐ง</div>
        <div class="summary-content">
          <div class="summary-label">ุฅุฌูุงูู ุงูุตูุงูุงุช</div>
          <div class="summary-amount" id="carsMaintenanceTotal">0</div>
        </div>
      </div>
      
      <div class="summary-card cars-avg">
        <div class="summary-icon">๐</div>
        <div class="summary-content">
          <div class="summary-label">ูุชูุณุท ุงูุตูุงูุงุช/ุณูุงุฑุฉ</div>
          <div class="summary-amount" id="carsAvgMaintenance">0.00</div>
        </div>
      </div>
    </div>

    <div class="searchbar">
      <input id="carSearch" class="input" placeholder="๐ ุจุญุซ ุณุฑูุน...">
    </div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>#</th><th>ุฑูู ุงูุณูุงุฑุฉ</th><th>ุงูููุฏูู</th><th>ุงูุนููู</th><th>ุนุฏุฏ ุงูุตูุงูุงุช</th><th>ุฅุฌุฑุงุกุงุช</th></tr></thead>
        <tbody id="carsBody"></tbody>
      </table>
    </div>
  </section>

  <!-- ====== ุงูุตูุงูุฉ ====== -->
  <section class="screen" id="maintenance">
    <div class="screen-head">
      <div class="title">๐ง ุณุฌูุงุช ุงูุตูุงูุฉ</div>
    </div>
    
    <!-- ุฃุฒุฑุงุฑ ุงูุชุฌููุน -->
    <div class="stats-filters">
      <div class="filter-buttons">
        <button id="maintenanceFilterDaily" class="btn btn-primary active">๐ ูููู</button>
        <button id="maintenanceFilterMonthly" class="btn btn-ghost">๐ ุดูุฑู</button>
        <button id="maintenanceFilterYearly" class="btn btn-ghost">๐ ุณููู</button>
      </div>
    </div>

    <!-- ููุฎุต ุงูุตูุงูุฉ -->
    <div class="stats-summary">
      <div class="summary-card maintenance-total">
        <div class="summary-icon">๐ง</div>
        <div class="summary-content">
          <div class="summary-label">ุฅุฌูุงูู ุงูุตูุงูุงุช</div>
          <div class="summary-amount" id="maintenanceTotal">0</div>
        </div>
      </div>
      
      <div class="summary-card maintenance-types">
        <div class="summary-icon">๐</div>
        <div class="summary-content">
          <div class="summary-label">ุฃููุงุน ุงูุตูุงูุฉ</div>
          <div class="summary-amount" id="maintenanceTypes">0</div>
        </div>
      </div>
      
      <div class="summary-card maintenance-cars">
        <div class="summary-icon">๐</div>
        <div class="summary-content">
          <div class="summary-label">ุงูุณูุงุฑุงุช ุงููุฎุฏูุฉ</div>
          <div class="summary-amount" id="maintenanceCars">0</div>
        </div>
      </div>
    </div>

    <div class="searchbar">
      <input id="maintSearch" class="input" placeholder="๐ ุจุญุซ ุณุฑูุน...">
    </div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>#</th><th>ุงูุชุงุฑูุฎ</th><th>ุงูููุน</th><th>ุงูุณูุงุฑุฉ</th><th>ุงูููุงุญุธุงุช</th></tr></thead>
        <tbody id="maintBody"></tbody>
      </table>
    </div>
  </section>

  <!-- ====== ุงูุฅูุฑุงุฏุงุช ====== -->
  <section class="screen" id="revenue">
    <div class="screen-head">
      <div class="title">๐ฐ ุงูุฅูุฑุงุฏุงุช</div>
    </div>
    
    <!-- ุฃุฒุฑุงุฑ ุงูุชุฌููุน -->
    <div class="revenue-filters">
      <div class="filter-buttons">
        <button id="filterDaily" class="btn btn-primary active">๐ ูููู</button>
        <button id="filterWeekly" class="btn btn-ghost">๐ ุฃุณุจูุนู</button>
        <button id="filterMonthly" class="btn btn-ghost">๐ ุดูุฑู</button>
      </div>
      <div class="export-buttons">
        <button id="exportRevenueExcel" class="btn btn-success">๐ ุชุตุฏูุฑ Excel</button>
        <button id="exportRevenueCSV" class="btn btn-warning">๐ ุชุตุฏูุฑ CSV</button>
      </div>
    </div>

    <!-- ููุฎุต ุงูุฅูุฑุงุฏุงุช -->
    <div class="revenue-summary">
      <div class="summary-card revenue-total">
        <div class="summary-icon">๐ฐ</div>
        <div class="summary-content">
          <div class="summary-label">ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช</div>
          <div class="summary-amount" id="revenueTotal">0.00</div>
        </div>
      </div>
      
      <div class="summary-card revenue-count">
        <div class="summary-icon">๐</div>
        <div class="summary-content">
          <div class="summary-label">ุนุฏุฏ ุงูุนูููุงุช</div>
          <div class="summary-amount" id="revenueCount">0</div>
        </div>
      </div>
      
      <div class="summary-card revenue-avg">
        <div class="summary-icon">๐</div>
        <div class="summary-content">
          <div class="summary-label">ูุชูุณุท ุงูุฅูุฑุงุฏ</div>
          <div class="summary-amount" id="revenueAvg">0.00</div>
        </div>
      </div>
    </div>

    <div class="searchbar">
      <input id="revSearch" class="input" placeholder="๐ ุจุญุซ ุณุฑูุน...">
    </div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>#</th><th>ุงูุนููู</th><th>ุงูุณูุงุฑุฉ</th><th>ุงููุจูุบ</th><th>ุงูุชุงุฑูุฎ</th><th>ุงููุตู</th></tr></thead>
        <tbody id="revBody"></tbody>
      </table>
    </div>
  </section>

  <!-- ====== ุงููุตุฑููุงุช ====== -->
  <section class="screen" id="expenses">
    <div class="screen-head">
      <div class="title">๐ธ ุงููุตุฑููุงุช</div>
      <button id="addExpenseBtn" class="btn btn-primary">โ ุฅุถุงูุฉ ูุตุฑูู ุฌุฏูุฏ</button>
    </div>
    
    <!-- ุฃุฒุฑุงุฑ ุงูุชุฌููุน -->
    <div class="stats-filters">
      <div class="filter-buttons">
        <button id="expensesFilterDaily" class="btn btn-primary active">๐ ูููู</button>
        <button id="expensesFilterMonthly" class="btn btn-ghost">๐ ุดูุฑู</button>
        <button id="expensesFilterYearly" class="btn btn-ghost">๐ ุณููู</button>
      </div>
    </div>

    <!-- ููุฎุต ุงููุตุฑููุงุช -->
    <div class="stats-summary">
      <div class="summary-card expenses-total">
        <div class="summary-icon">๐ธ</div>
        <div class="summary-content">
          <div class="summary-label">ุฅุฌูุงูู ุงููุตุฑููุงุช</div>
          <div class="summary-amount" id="expensesTotal">0.00</div>
        </div>
      </div>
      
      <div class="summary-card expenses-count">
        <div class="summary-icon">๐</div>
        <div class="summary-content">
          <div class="summary-label">ุนุฏุฏ ุงููุตุฑููุงุช</div>
          <div class="summary-amount" id="expensesCount">0</div>
        </div>
      </div>
      
      <div class="summary-card expenses-avg">
        <div class="summary-icon">๐</div>
        <div class="summary-content">
          <div class="summary-label">ูุชูุณุท ุงููุตุฑูู</div>
          <div class="summary-amount" id="expensesAvg">0.00</div>
        </div>
      </div>
    </div>
    
    <!-- ูููุฐุฌ ุฅุถุงูุฉ ูุตุฑูู ุฌุฏูุฏ -->
    <div id="expenseForm" class="form-grid" style="display:none; margin-bottom:20px; padding:20px; border:1px solid var(--border); border-radius:8px; background:var(--bg-secondary);">
      <div class="form-group"><label>ุงููุจูุบ *</label><input id="expenseAmount" type="number" step="0.01" class="input" required></div>
      <div class="form-group"><label>ุงูุชุงุฑูุฎ *</label><input id="expenseDate" type="date" class="input" required></div>
      <div class="form-group">
        <label>ุงูููุน *</label>
        <select id="expenseType" class="select">
          <option>ูุทุน ุบูุงุฑ</option>
          <option>ุฃุฌูุฑ</option>
          <option>ุฅูุฌุงุฑ</option>
          <option>ููุฑุจุงุก</option>
          <option>ููุงู</option>
          <option>ุฃุฎุฑู</option>
        </select>
      </div>
      <div class="form-group" style="grid-column:1/-1"><label>ููุงุญุธุงุช</label><input id="expenseNotes" class="input"></div>
      <div style="grid-column:1/-1; display:flex; gap:10px;">
        <button id="saveExpense" class="btn btn-primary">๐พ ุญูุธ ุงููุตุฑูู</button>
        <button id="cancelExpense" class="btn btn-ghost">โ ุฅูุบุงุก</button>
      </div>
    </div>

    <div class="searchbar">
      <input id="expSearch" class="input" placeholder="๐ ุจุญุซ ุณุฑูุน...">
    </div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>#</th><th>ุงููุจูุบ</th><th>ุงูุชุงุฑูุฎ</th><th>ุงูููุน</th><th>ุงูููุงุญุธุงุช</th></tr></thead>
        <tbody id="expBody"></tbody>
      </table>
    </div>
  </section>

  <!-- ====== ุงููุญุงุณุจุฉ ====== -->
  <section class="screen" id="accounting">
    <div class="screen-head">
      <div class="title">๐ ุงููุญุงุณุจุฉ</div>
    </div>
    
    <!-- ุฃุฒุฑุงุฑ ุงูุชุฌููุน -->
    <div class="stats-filters">
      <div class="filter-buttons">
        <button id="accountingFilterDaily" class="btn btn-primary active">๐ ูููู</button>
        <button id="accountingFilterMonthly" class="btn btn-ghost">๐ ุดูุฑู</button>
        <button id="accountingFilterYearly" class="btn btn-ghost">๐ ุณููู</button>
      </div>
    </div>
    
    <div class="accounting-summary">
      <div class="summary-card profit">
        <div class="summary-icon">๐ฐ</div>
        <div class="summary-content">
          <div class="summary-label">ุฅุฌูุงูู ุงูุฃุฑุจุงุญ</div>
          <div class="summary-amount" id="totalRevenue">0.00</div>
        </div>
      </div>
      
      <div class="summary-card expense">
        <div class="summary-icon">๐ธ</div>
        <div class="summary-content">
          <div class="summary-label">ุฅุฌูุงูู ุงููุตุฑููุงุช</div>
          <div class="summary-amount" id="totalExpenses">0.00</div>
        </div>
      </div>
      
      <div class="summary-card net-profit">
        <div class="summary-icon">๐</div>
        <div class="summary-content">
          <div class="summary-label">ุตุงูู ุงูุฑุจุญ</div>
          <div class="summary-amount" id="netProfit">0.00</div>
        </div>
      </div>
    </div>

    <div class="export-buttons">
      <button id="exportRevenue" class="btn btn-success">๐ ุชุตุฏูุฑ ุชูุฑูุฑ ุงูุฃุฑุจุงุญ (CSV)</button>
      <button id="exportExpenses" class="btn btn-warning">๐ ุชุตุฏูุฑ ุชูุฑูุฑ ุงููุตุฑููุงุช (CSV)</button>
      <button id="exportFullReport" class="btn btn-primary">๐ ุชุตุฏูุฑ ุชูุฑูุฑ ุดุงูู (CSV)</button>
      <button id="exportClientsFullAccounting" class="btn btn-info">๐ฅ ุชุตุฏูุฑ ุจูุงูุงุช ุงูุนููุงุก ุงูุดุงููุฉ</button>
    </div>
  </section>

  <!-- ====== Car Details Modal ====== -->
  <div class="modal" id="carDetailsModal">
    <div class="modal-box">
      <div class="modal-head">
        <div class="title" id="carDetailsTitle">ุชูุงุตูู ุงูุณูุงุฑุฉ</div>
        <button class="close" data-close="carDetailsModal">&times;</button>
      </div>
      <div id="carDetailsContent">
        <div class="muted" id="carDetailsOwner" style="margin-bottom:8px"></div>
        <div class="table-wrap">
          <table>
            <thead><tr><th>#</th><th>ุงูุชุงุฑูุฎ</th><th>ุงูููุน</th><th>ุงูููุงุญุธุงุช</th></tr></thead>
            <tbody id="carDetailsTable"></tbody>
          </table>
        </div>
      </div>
      <button id="exportCarDetails" class="btn btn-success" style="margin-top:10px">๐ ุชุตุฏูุฑ CSV</button>
    </div>
  </div>

</div>

<!-- ุงูุฑุจุท ุจุงูุฌุงูุงุณูุฑูุจุช -->
<script src="app.js"></script>
</body>
</html>
